<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Massagens Zen - Agendamento</title>
  <link rel="stylesheet" href="style-user.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Tela de Login -->
  <div id="loginScreen" class="auth-screen">
    <div class="auth-container">
      <div class="logo-placeholder" style="width: 80px; height: 80px; margin: 0 auto 24px;"></div>
      <h1 style="text-align: center; margin-bottom: 8px;">Massagens Zen</h1>
      <p style="text-align: center; color: var(--text-secondary); margin-bottom: 32px;">Fa√ßa login para agendar</p>
      
      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">Login</button>
        <button class="auth-tab" data-tab="register">Criar Conta</button>
      </div>

      <!-- Tab Login -->
      <div id="loginTab" class="auth-tab-content active">
        <div style="margin-bottom: 12px;">
          <input id="loginEmail" type="email" class="input" placeholder="seu@email.com" required/>
        </div>
        <div style="margin-bottom: 16px;">
          <input id="loginPassword" type="password" class="input" placeholder="Senha" required/>
        </div>
        <button class="btn btn-primary" onclick="loginWithEmail()" style="width: 100%; margin-bottom: 12px;">Entrar</button>
        
        <div class="divider">ou</div>
        
        <button class="btn btn-google" onclick="loginWithGoogle()" style="width: 100%;">
          <svg width="18" height="18" viewBox="0 0 18 18" style="margin-right: 8px;">
            <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
            <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
            <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9c0 1.452.348 2.827.957 4.042l3.007-2.335z"/>
            <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
          </svg>
          Continuar com Google
        </button>
        
        <p style="text-align: center; margin-top: 20px; font-size: 0.9rem; color: var(--text-secondary);">
          Primeiro acesso? <a href="#" onclick="showRegisterTab(); return false;" style="color: var(--primary); font-weight: 600; text-decoration: none;">Registre-se</a>
        </p>
      </div>

      <!-- Tab Registro -->
      <div id="registerTab" class="auth-tab-content">
        <div style="margin-bottom: 12px;">
          <input id="registerName" type="text" class="input" placeholder="Seu nome completo" required/>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerCpf" type="text" class="input" placeholder="CPF" required maxlength="14"/>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerBirthdate" type="text" class="input" placeholder="Data de Nascimento (DD/MM/AAAA)" required maxlength="10"/>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerPhone" type="tel" class="input" placeholder="(00) 00000-0000" required maxlength="15"/>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerEmail" type="email" class="input" placeholder="seu@email.com" required/>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerPassword" type="password" class="input" placeholder="Senha (m√≠nimo 6 caracteres)" required/>
        </div>
        
        <!-- Endere√ßo -->
        <h4 style="margin: 20px 0 12px 0; color: var(--text); font-size: 1rem;">Endere√ßo</h4>
        <div style="margin-bottom: 12px; display: flex; gap: 8px;">
          <input id="registerCep" type="text" class="input" placeholder="CEP" required maxlength="9" style="flex: 1;"/>
          <button type="button" class="btn btn-ghost" onclick="searchCep()" style="padding: 14px 20px;">
            <i class="fas fa-search"></i>
          </button>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerStreet" type="text" class="input" placeholder="Rua" required/>
        </div>
        <div style="margin-bottom: 12px; display: grid; grid-template-columns: 1fr 2fr; gap: 8px;">
          <input id="registerNumber" type="text" class="input" placeholder="N√∫mero" required/>
          <input id="registerComplement" type="text" class="input" placeholder="Complemento (opcional)"/>
        </div>
        <div style="margin-bottom: 12px;">
          <input id="registerNeighborhood" type="text" class="input" placeholder="Bairro" required/>
        </div>
        <div style="margin-bottom: 16px; display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
          <input id="registerCity" type="text" class="input" placeholder="Cidade" required/>
          <input id="registerState" type="text" class="input" placeholder="UF" required maxlength="2"/>
        </div>
        
        <button class="btn btn-primary" onclick="registerWithEmail()" style="width: 100%; margin-bottom: 12px;">Criar Conta</button>
        
        <div class="divider">ou</div>
        
        <button class="btn btn-google" onclick="loginWithGoogle()" style="width: 100%;">
          <svg width="18" height="18" viewBox="0 0 18 18" style="margin-right: 8px;">
            <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
            <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
            <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9c0 1.452.348 2.827.957 4.042l3.007-2.335z"/>
            <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
          </svg>
          Continuar com Google
        </button>
        
        <p style="text-align: center; margin-top: 20px; font-size: 0.9rem; color: var(--text-secondary);">
          J√° tem conta? <a href="#" onclick="showLoginTab(); return false;" style="color: var(--primary); font-weight: 600; text-decoration: none;">Fa√ßa login</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Modal de Completar Cadastro (Google) -->
  <div id="completeProfileModal" class="modal hidden">
    <div class="modal-content">
      <h2 style="margin-bottom: 8px; text-align: center;">Complete seu Cadastro</h2>
      <p style="text-align: center; color: var(--text-secondary); margin-bottom: 24px; font-size: 0.9rem;">
        Precisamos de mais algumas informa√ß√µes para continuar
      </p>
      
      <div style="margin-bottom: 12px;">
        <input id="completeName" type="text" class="input" placeholder="Seu nome completo" required/>
      </div>
      <div style="margin-bottom: 12px;">
        <input id="completeCpf" type="text" class="input" placeholder="CPF" required maxlength="14"/>
      </div>
      <div style="margin-bottom: 12px;">
        <input id="completeBirthdate" type="text" class="input" placeholder="Data de Nascimento (DD/MM/AAAA)" required maxlength="10"/>
      </div>
      <div style="margin-bottom: 12px;">
        <input id="completePhone" type="tel" class="input" placeholder="(00) 00000-0000" required maxlength="15"/>
      </div>
      
      <h4 style="margin: 20px 0 12px 0; color: var(--text); font-size: 1rem;">Endere√ßo</h4>
      <div style="margin-bottom: 12px; display: flex; gap: 8px;">
        <input id="completeCep" type="text" class="input" placeholder="CEP" required maxlength="9" style="flex: 1;"/>
        <button type="button" class="btn btn-ghost" onclick="searchCepComplete()" style="padding: 14px 20px;">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <div style="margin-bottom: 12px;">
        <input id="completeStreet" type="text" class="input" placeholder="Rua" required/>
      </div>
      <div style="margin-bottom: 12px; display: grid; grid-template-columns: 1fr 2fr; gap: 8px;">
        <input id="completeNumber" type="text" class="input" placeholder="N√∫mero" required/>
        <input id="completeComplement" type="text" class="input" placeholder="Complemento (opcional)"/>
      </div>
      <div style="margin-bottom: 12px;">
        <input id="completeNeighborhood" type="text" class="input" placeholder="Bairro" required/>
      </div>
      <div style="margin-bottom: 20px; display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
        <input id="completeCity" type="text" class="input" placeholder="Cidade" required/>
        <input id="completeState" type="text" class="input" placeholder="UF" required maxlength="2"/>
      </div>
      
      <button class="btn btn-primary" onclick="completeProfile()" style="width: 100%;">Salvar e Continuar</button>
    </div>
  </div>

  <!-- Tela Principal -->
  <div id="mainScreen" class="hidden">
    <header class="app-header">
      <div class="logo-placeholder" id="logoUser"></div>
      <div class="header-title">
        <h1>Massagens Zen</h1>
        <p id="greeting">Ol√°!</p>
      </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebarUser">
      <div class="sb-header">
        <div style="font-weight:700;font-size:1.1rem;margin-bottom:4px" id="sidebarUserName">Usu√°rio</div>
        <div class="small" id="sidebarUserEmail">email@exemplo.com</div>
      </div>

      <nav class="sb-menu">
        <div class="sb-item active" data-tab="home">
          <span class="sb-icon">üè†</span>
          <span>Tela Inicial</span>
        </div>
        <div class="sb-item" data-tab="booking">
          <span class="sb-icon">üìÖ</span>
          <span>Agendar</span>
        </div>
        <div class="sb-item" data-tab="upcoming">
          <span class="sb-icon">üïê</span>
          <span>Pr√≥ximas Sess√µes</span>
        </div>
        <div class="sb-item" data-tab="history">
          <span class="sb-icon">‚úì</span>
          <span>Hist√≥rico</span>
        </div>
        <div class="sb-item" data-tab="profile">
          <span class="sb-icon">üë§</span>
          <span>Perfil</span>
        </div>
      </nav>

      <div class="sb-footer">
        <button class="btn btn-danger" onclick="logout()" style="width:100%">Sair</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="container" id="mainContent">
      <!-- Tab Tela Inicial -->
      <section id="tab-home">
        <div class="card quote-card">
          <h3 style="margin-bottom: 16px; text-align: center; color: var(--primary);">üí≠ Frase do Dia</h3>
          <div id="dailyQuote"></div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr; gap: 16px; margin-top: 16px;">
          <div class="card session-card">
            <h3 style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
              <span>‚ú®</span> √öltima Sess√£o
            </h3>
            <div id="lastSessionInfo"></div>
          </div>

          <div class="card session-card">
            <h3 style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
              <span>üìÖ</span> Pr√≥xima Sess√£o
            </h3>
            <div id="nextSessionInfo"></div>
          </div>
        </div>
      </section>

      <!-- Tab Agendar -->
      <section id="tab-booking" class="hidden">
        <div class="card">
          <h3>Novo Agendamento</h3>
          
          <div class="top-note">Selecione o tipo de massagem</div>
          <select id="massageType" class="input" style="margin-bottom:12px">
            <option value="">Carregando...</option>
          </select>
          
          <div class="price-display" id="priceDisplayBox" style="margin-bottom:16px">
            <span class="small">Valor da sess√£o (1 hora):</span>
            <span class="price-value" id="priceDisplay">R$ 0,00</span>
          </div>

          <div class="top-note">Selecione a data</div>
          <div id="calendarClient" class="calendar-client"></div>

          <div id="timeSlotsSection" class="hidden" style="margin-top:16px">
            <div class="top-note">Hor√°rios dispon√≠veis</div>
            <div id="timeSlotsList" class="time-slots-grid"></div>
          </div>

          <div style="margin-top:16px">
            <textarea id="note" class="input" rows="2" placeholder="Observa√ß√µes (ex: prefer√™ncia por massagista)"></textarea>
          </div>

          <div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn-primary" onclick="bookAppointment()" id="btnBook">Confirmar Agendamento</button>
            <button class="btn btn-ghost" onclick="resetForm()">Limpar</button>
          </div>
        </div>
      </section>

      <!-- Tab Pr√≥ximos Agendamentos -->
      <section id="tab-upcoming" class="hidden">
        <div class="card">
          <h3>Pr√≥ximos Agendamentos</h3>
          <div class="small" style="margin-bottom:12px">Sess√µes agendadas e ainda n√£o realizadas</div>
          <div id="upcomingList" class="list"></div>
          <div id="emptyUpcoming" class="small empty-state hidden">Nenhum agendamento futuro</div>
        </div>
      </section>

      <!-- Tab Hist√≥rico -->
      <section id="tab-history" class="hidden">
        <div class="card">
          <h3>Hist√≥rico de Sess√µes</h3>
          <div class="small" style="margin-bottom:12px">Sess√µes realizadas e pagas</div>
          <div id="historyList" class="list"></div>
          <div id="emptyHistory" class="small empty-state hidden">Nenhuma sess√£o no hist√≥rico</div>
        </div>
      </section>

      <!-- Tab Perfil -->
      <section id="tab-profile" class="hidden">
        <div class="card">
          <h3>Meu Perfil</h3>
          <div style="margin-top:16px">
            <label class="small" style="display:block;margin-bottom:6px">Nome completo</label>
            <input id="profileName" type="text" class="input" placeholder="Seu nome completo"/>
          </div>
          <div style="margin-top:12px">
            <label class="small" style="display:block;margin-bottom:6px">CPF</label>
            <input id="profileCpf" type="text" class="input" placeholder="CPF" maxlength="14"/>
          </div>
          <div style="margin-top:12px">
            <label class="small" style="display:block;margin-bottom:6px">Data de Nascimento</label>
            <input id="profileBirthdate" type="text" class="input" placeholder="DD/MM/AAAA" maxlength="10"/>
          </div>
          <div style="margin-top:12px">
            <label class="small" style="display:block;margin-bottom:6px">Telefone</label>
            <input id="profilePhone" type="tel" class="input" placeholder="(00) 00000-0000" maxlength="15"/>
          </div>
          <div style="margin-top:12px">
            <label class="small" style="display:block;margin-bottom:6px">Email</label>
            <input id="profileEmail" type="email" class="input" disabled/>
          </div>
          
          <h4 style="margin: 24px 0 12px 0; color: var(--text); font-size: 1.1rem;">Endere√ßo</h4>
          <div style="margin-bottom: 12px; display: flex; gap: 8px;">
            <input id="profileCep" type="text" class="input" placeholder="CEP" maxlength="9" style="flex: 1;"/>
            <button type="button" class="btn btn-ghost" onclick="searchCepProfile()" style="padding: 14px 20px;">
              <i class="fas fa-search"></i>
            </button>
          </div>
          <div style="margin-top:12px">
            <input id="profileStreet" type="text" class="input" placeholder="Rua"/>
          </div>
          <div style="margin-top:12px; display: grid; grid-template-columns: 1fr 2fr; gap: 8px;">
            <input id="profileNumber" type="text" class="input" placeholder="N√∫mero"/>
            <input id="profileComplement" type="text" class="input" placeholder="Complemento (opcional)"/>
          </div>
          <div style="margin-top:12px">
            <input id="profileNeighborhood" type="text" class="input" placeholder="Bairro"/>
          </div>
          <div style="margin-top:12px; display: grid; grid-template-columns: 2fr 1fr; gap: 8px;">
            <input id="profileCity" type="text" class="input" placeholder="Cidade"/>
            <input id="profileState" type="text" class="input" placeholder="UF" maxlength="2"/>
          </div>
          
          <div style="margin-top:20px">
            <button class="btn btn-primary" onclick="saveProfile()">Salvar Altera√ß√µes</button>
          </div>
        </div>
      </section>
    </main>

    <button class="fab" title="Menu" onclick="toggleSidebar()">‚ò∞</button>

    <!-- RODAP√â -->
    <footer class="app-footer">
      <div class="footer-content">
        <div class="footer-section footer-about">
          <div class="footer-logo">
            <div class="logo-placeholder footer-logo-icon"></div>
            <div class="footer-brand">
              <h3>Massagens Zen</h3>
              <p>Relaxamento e bem-estar</p>
            </div>
          </div>
          <p class="footer-description">
            Seu espa√ßo de tranquilidade e renova√ß√£o. Oferecemos massagens terap√™uticas para seu corpo e mente.
          </p>
        </div>

        <div class="footer-section footer-contact">
          <h4>Contato</h4>
          <div class="footer-contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <div>
              <strong>Endere√ßo</strong>
              <p>Rua das Flores, 123 - Centro<br>Passo Fundo/RS - CEP 99010-000</p>
            </div>
          </div>
          <div class="footer-contact-item">
            <i class="fas fa-phone"></i>
            <div>
              <strong>Telefone</strong>
              <p>(54) 3311-5500</p>
            </div>
          </div>
          <div class="footer-contact-item">
            <i class="fas fa-clock"></i>
            <div>
              <strong>Hor√°rio</strong>
              <p>Seg-Sex: 8h √†s 20h<br>S√°b: 8h √†s 14h</p>
            </div>
          </div>
        </div>

        <div class="footer-section footer-social">
          <h4>Redes Sociais</h4>
          <p style="margin-bottom: 16px;">Siga-nos e fique por dentro das novidades!</p>
          <div class="social-links">
            <a href="https://wa.me/5554933115500" target="_blank" class="social-link whatsapp" title="WhatsApp">
              <i class="fab fa-whatsapp"></i>
              <span>WhatsApp</span>
            </a>
            <a href="https://facebook.com/massagenszen" target="_blank" class="social-link facebook" title="Facebook">
              <i class="fab fa-facebook-f"></i>
              <span>Facebook</span>
            </a>
            <a href="https://instagram.com/massagenszen" target="_blank" class="social-link instagram" title="Instagram">
              <i class="fab fa-instagram"></i>
              <span>Instagram</span>
            </a>
            <a href="https://maps.google.com/?q=Rua+das+Flores+123+Passo+Fundo" target="_blank" class="social-link location" title="Localiza√ß√£o">
              <i class="fas fa-map-marked-alt"></i>
              <span>Localiza√ß√£o</span>
            </a>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 Massagens Zen. Todos os direitos reservados.</p>
        <p class="footer-dev">Desenvolvido com üíö para seu bem-estar</p>
      </div>
    </footer>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  
  <!-- Scripts -->
  <script src="firebase-config.js"></script>
  <script src="user.js"></script>
</body>
</html>
